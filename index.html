<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Mangrat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üß† Panel d'Administration Mangrat</h1>
            <p>Enseignez de nouvelles connaissances et supervisez le cerveau.</p>
        </header>

        <main>
            <div class="teach-section">
                <h2>Enseigner une nouvelle information</h2>
                <form id="teach-form">
                    <input type="text" id="question" placeholder="La question ou le mot-cl√© (ex: 'Capitale de la France')" required>
                    <textarea id="answer" placeholder="La r√©ponse (ex: 'Paris')" required></textarea>
                    <input type="text" id="category" placeholder="Cat√©gorie (ex: 'g√©ographie')" required>
                    <button type="submit">Enseigner √† Mangrat</button>
                </form>
                <div id="form-status"></div>
            </div>

            <div class="knowledge-section">
                <h2>Prochainement : Vue de la base de connaissances</h2>
                <p>Cette section affichera les donn√©es des tables pour v√©rification.</p>
            </div>
        </main>
    </div>

    <script>
        const form = document.getElementById('teach-form');
        const statusDiv = document.getElementById('form-status');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const question = document.getElementById('question').value;
            const answer = document.getElementById('answer').value;
            const category = document.getElementById('category').value;

            statusDiv.textContent = 'Enseignement en cours...';
            statusDiv.className = 'status-loading';

            try {
                const response = await fetch('/teach', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ question, answer, category })
                });

                const result = await response.json();

                if (response.ok) {
                    statusDiv.textContent = result.reply;
                    statusDiv.className = 'status-success';
                    form.reset();
                } else {
                    statusDiv.textContent = `Erreur: ${result.reply}`;
                    statusDiv.className = 'status-error';
                }
            } catch (error) {
                statusDiv.textContent = 'Erreur de connexion avec le serveur.';
                statusDiv.className = 'status-error';
            }
        });
    </script>
</body>
</html>
